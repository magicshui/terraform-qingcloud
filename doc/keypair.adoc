=== 创建密钥

**示例**
----
resource "qingcloud_keypair" "arthur"{
	name = "arthur"
	description = "this is a test keypair"
	public_key = "${file("~/.ssh/id_rsa.pub")}"   <1>
}
----

<1> 可以通过 Terraform 默认带有的函数来读取本地的文件

[NOTE]
====
不支持青云创建的方式，只允许用户创建。
====

**参数**
[options="header"]
|====
| 名称 | 必选 | 类型
| name | {y} | 密钥对名称
| description| {n}| 介绍
| public_key | {y} | SSH 公钥内容
|====


**暴露值**
[options="header"]
|====
| 名称 | 说明

| ID
a|
----
密钥的 ID <1>
----

|====

<1> 在关联密钥的时候可以使用

=== 更新密钥
只能修改密钥的`name`和`description`。

===  删除密钥
当密钥被删除之前，将会自动寻找使用此密钥的主机，并从主机进行解绑，所有主机解绑成功以后将会删除密钥。


=== 密钥关联
将密钥和一台主机关联在一起。

**示例**
[source,json]
----
source "qingcloud_keypair_association" "first"{
  instance = "123123"
  keypair = "123123123"
}
----

**参数**
[options="header"]
|====
| 名称 | 必选 | 解释
| instance | {y} | 主机 ID
| keypair | {y} | 密钥 ID
|====

**暴露**
.
[options="header"]
|====
| 名称 | 说明

|  id
a|
----
关联的ID <1>
----

|====
<1> ID 生成的规则是：`keypairId*instanceID`，这个是`Terraform Qingcloud`为了方便管理资源规定的，不是青云的规则。


==== 删除关联
当关联删除以后，将会将密钥从关联的主机上卸载。

[NOTE]
====
对于创建主机时，使用的密钥，将会需要从主机创建的 Key 上卸载。
====
